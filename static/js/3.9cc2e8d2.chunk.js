(this["webpackJsonppreference-opt-web"]=this["webpackJsonppreference-opt-web"]||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var r,a=n(4),i=n.n(a),c=n(9),u=n.n(c),o=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,23)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},s=n(5),l=n(21),f=n(2);!function(e){e[e.Initial=0]="Initial",e[e.Running=1]="Running",e[e.Help=2]="Help"}(r||(r={}));var d=function(){return f.a.new_empty(3).with_same_bounds(new Float64Array([0,1]))},p=Object(l.a)((function(e,t){return{step:0,engine:d(),state:r.Initial,savedSamples:[],loadSampleData:function(){e((function(e){var t=e.step,n=e.engine,r=e.sampleData,a=t<12?null===r||void 0===r?void 0:r.f_prior():void 0;return{step:t+1,sampleData:n.get_next_sample(50,1,a)}}))},selectSample:function(n){var r,a,i,c=(null===(r=t().sampleData)||void 0===r?void 0:r.idx1)===n?null===(a=t().sampleData)||void 0===a?void 0:a.idx2:null===(i=t().sampleData)||void 0===i?void 0:i.idx1;if(void 0!==c){t().engine.add_preference(n,c);var u=t().engine.get_optimal_values();e({bestSample:u}),t().loadSampleData()}},saveCurrentBest:function(){var n=t().bestSample;void 0!==n&&(t().savedSamples.push(n),e({step:0,engine:d(),bestSample:void 0}),t().loadSampleData())},setState:function(t){return e({state:t})},toogleHelp:function(){return e((function(e){return{state:e.state===r.Help?r.Running:r.Help}}))}}})),b=n(3),m=function(e){return{loadSampleData:e.loadSampleData,state:e.state,setState:e.setState}},v=function(e){var t=Object.assign({},e),n=p(m),i=n.loadSampleData,c=n.state,u=n.setState,o=Object(a.useCallback)((function(){i(),u(r.Running)}),[i,u]);return Object(b.jsx)("div",Object(s.a)(Object(s.a)({},t),{},{children:c!==r.Running?Object(b.jsxs)("div",{className:"mx-auto max-w-2xl flex flex-col text-lg break-words",children:[Object(b.jsxs)("p",{children:["This is an example of active preference optimization using the gaussian processes"," ",Object(b.jsx)("a",{href:"http://mlg.eng.cam.ac.uk/zoubin/papers/icml05chuwei-pl.pdf",target:"_black",rel:"noopener",children:'"Preference Learning with Gaussian Processes"'}),". I adapted the python implementation"," ",Object(b.jsx)("a",{href:"https://github.com/chariff/GPro",children:"GPro"})," to Rust so it's possible to load it in here using"," ",Object(b.jsx)("a",{href:"https://webassembly.org/",target:"_black",rel:"noopener",children:"Wasm"}),"."]}),Object(b.jsx)("p",{className:"mt-2",children:"This is a simple example where you select a group of colours. On each iteration 2 colour samples are shown and you can select which one your prefer. At any point you can choose to keep the current color."}),Object(b.jsxs)("p",{className:"mt-4",children:["You can find the code here:"," ",Object(b.jsx)("a",{href:"https://github.com/renato145/preference_opt",target:"_black",rel:"noopener",children:"https://github.com/renato145/preference_opt"}),"."]}),c===r.Initial?Object(b.jsx)("button",{className:"mt-6 md:mt-12 md:self-center md:px-40 btn-confirm btn-lg",onClick:o,children:"Start"}):null]}):null}))},h=n(7),j=function(e){var t=e.data,n=Object(h.a)(e,["data"]),r=void 0!==t?function(e){var t=Array.from(e).map((function(e){return(255*e).toFixed()}));return"rgb(".concat(t,")")}(t):void 0,a=void 0!==r?{backgroundColor:r}:{},i=void 0!==r?r:"rgb(...)";return Object(b.jsxs)("div",Object(s.a)(Object(s.a)({},n),{},{children:[Object(b.jsx)("p",{className:"text-xl font-bold text-center",children:i}),Object(b.jsx)("div",{className:"mt-1 w-48 h-48 border-4 border-gray-700",style:a})]}))},x=function(e){return e.selectSample},y=function(e){var t=e.idx,n=e.data,r=Object(h.a)(e,["idx","data"]),a=p(x);return Object(b.jsx)("div",Object(s.a)(Object(s.a)({},r),{},{children:Object(b.jsxs)("div",{className:"flex flex-col items-center",children:[Object(b.jsxs)("p",{className:"text-xl font-bold",children:["Sample ",t]}),Object(b.jsx)(j,{className:"mt-1",data:n}),Object(b.jsx)("button",{className:"mt-2 px-4 btn",onClick:function(){return a(t)},children:"Select this sample"})]})}))},g=function(e){return e.saveCurrentBest},O=function(e){var t=e.data,n=e.active,r=void 0!==n&&n,a=Object(h.a)(e,["data","active"]),i=p(g);return Object(b.jsx)("div",Object(s.a)(Object(s.a)({},a),{},{children:Object(b.jsxs)("div",{className:"flex flex-col items-center",children:[Object(b.jsx)(j,{className:"mt-1",data:t}),r&&void 0!==t?Object(b.jsx)("button",{className:"mt-2 px-4 btn",onClick:i,children:"Keep this!"}):null]})}))},_=function(e){return{sampleData:e.sampleData,savedSamples:e.savedSamples,bestSample:e.bestSample}},w=function(e){var t=Object.assign({},e),n=p(_),r=n.sampleData,a=n.savedSamples,i=n.bestSample;return Object(b.jsx)("div",Object(s.a)(Object(s.a)({},t),{},{children:void 0!==r?Object(b.jsxs)("div",{className:"flex flex-col items-center",children:[Object(b.jsxs)("div",{className:"flex justify-around",children:[Object(b.jsx)(y,{idx:r.idx1,data:r.sample1()}),Object(b.jsx)(y,{className:"ml-8",idx:r.idx2,data:r.sample2()})]}),Object(b.jsxs)("div",{className:"mt-10 flex flex-wrap justify-center space-x-2",children:[a.map((function(e,t){return Object(b.jsx)(O,{data:e},t)})),Object(b.jsx)(O,{data:i,active:!0})]})]}):null}))},k=function(e){return{state:e.state,toogleHelp:e.toogleHelp}},S=function(){var e=p(k),t=e.state,n=e.toogleHelp;return Object(b.jsxs)("div",{className:"container mx-auto px-2 md:px-20 py-5",children:[Object(b.jsxs)("p",{className:"text-3xl font-extrabold text-center",children:["Preference Optimization"," ",t!==r.Initial?Object(b.jsx)("button",{className:"btn-link text-lg",onClick:n,children:"(info)"}):null]}),Object(b.jsx)(v,{className:t===r.Initial?"mt-6 md:mt-12":"mt-4"}),Object(b.jsx)(w,{className:"mt-10"})]})};n(20);u.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),o()},16:function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(2);r.w()},2:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return N})),n.d(t,"q",(function(){return D})),n.d(t,"i",(function(){return C})),n.d(t,"k",(function(){return A})),n.d(t,"m",(function(){return I})),n.d(t,"j",(function(){return F})),n.d(t,"c",(function(){return H})),n.d(t,"f",(function(){return P})),n.d(t,"o",(function(){return R})),n.d(t,"b",(function(){return T})),n.d(t,"e",(function(){return B})),n.d(t,"g",(function(){return q})),n.d(t,"l",(function(){return U})),n.d(t,"h",(function(){return z})),n.d(t,"n",(function(){return G})),n.d(t,"r",(function(){return L})),n.d(t,"p",(function(){return E}));var r=n(14),a=n(15),i=n(16),c=new Array(32).fill(void 0);function u(e){return c[e]}c.push(void 0,null,!0,!1);var o=c.length;function s(e){var t=u(e);return function(e){e<36||(c[e]=o,o=e)}(e),t}var l=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});l.decode();var f=null;function d(){return null!==f&&f.buffer===i.k.buffer||(f=new Uint8Array(i.k.buffer)),f}function p(e,t){return l.decode(d().subarray(e,e+t))}function b(e){o===c.length&&c.push(c.length+1);var t=o;return o=c[t],c[t]=e,t}var m=null;function v(){return null!==m&&m.buffer===i.k.buffer||(m=new Float64Array(i.k.buffer)),m}var h=0;function j(e,t){var n=t(8*e.length);return v().set(e,n/8),h=e.length,n}var x=null;function y(e,t){var n=t(4*e.length);return(null!==x&&x.buffer===i.k.buffer||(x=new Uint32Array(i.k.buffer)),x).set(e,n/4),h=e.length,n}var g=null;function O(){return null!==g&&g.buffer===i.k.buffer||(g=new Int32Array(i.k.buffer)),g}function _(e,t){return v().subarray(e/8,e/8+t)}function w(e){return function(){try{return e.apply(this,arguments)}catch(t){i.h(b(t))}}}var k=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();i.c(e)}},{key:"with_bounds",value:function(t){var n=this.__destroy_into_raw(),r=j(t,i.j),a=h,c=i.r(n,r,a);return e.__wrap(c)}},{key:"with_same_bounds",value:function(t){var n=this.__destroy_into_raw(),r=j(t,i.j),a=h,c=i.s(n,r,a);return e.__wrap(c)}},{key:"dims",value:function(){return i.m(this.ptr)>>>0}},{key:"get_next_sample",value:function(e,t,n){var r,a=void 0===(r=n)||null===r?0:j(n,i.j),c=h,u=i.n(this.ptr,e,t,a,c);return S.__wrap(u)}},{key:"add_preference",value:function(e,t){i.l(this.ptr,e,t)}},{key:"get_optimal_values",value:function(){try{var e=i.g(-16);i.o(e,this.ptr);var t=O()[e/4+0],n=O()[e/4+1],r=_(t,n).slice();return i.i(t,8*n),r}finally{i.g(16)}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new_empty",value:function(t){var n=i.q(t);return e.__wrap(n)}},{key:"new",value:function(t,n,r){var a=j(t,i.j),c=h,u=y(n,i.j),o=h,s=i.p(a,c,u,o,r);return e.__wrap(s)}}]),e}(),S=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();i.d(e)}},{key:"idx1",get:function(){return i.a(this.ptr)>>>0},set:function(e){i.e(this.ptr,e)}},{key:"idx2",get:function(){return i.b(this.ptr)>>>0},set:function(e){i.f(this.ptr,e)}},{key:"sample1",value:function(){try{var e=i.g(-16);i.u(e,this.ptr);var t=O()[e/4+0],n=O()[e/4+1],r=_(t,n).slice();return i.i(t,8*n),r}finally{i.g(16)}}},{key:"sample2",value:function(){try{var e=i.g(-16);i.v(e,this.ptr);var t=O()[e/4+0],n=O()[e/4+1],r=_(t,n).slice();return i.i(t,8*n),r}finally{i.g(16)}}},{key:"f_prior",value:function(){try{var e=i.g(-16);i.t(e,this.ptr);var t,n=O()[e/4+0],r=O()[e/4+1];return 0!==n&&(t=_(n,r).slice(),i.i(n,8*r)),t}finally{i.g(16)}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),N=w((function(e,t){u(e).getRandomValues(u(t))})),D=function(e){s(e)},C=w((function(e,t,n){var r,a;u(e).randomFillSync((r=t,a=n,d().subarray(r/1,r/1+a)))})),A=w((function(){return b(self.self)})),I=function(){return b(e)},F=w((function(e,t,n){return b(u(e).require(p(t,n)))})),H=function(e){return b(u(e).crypto)},P=function(e){return b(u(e).msCrypto)},R=function(e){return void 0===u(e)},T=function(e){return b(u(e).buffer)},B=function(e){return u(e).length},q=function(e){return b(new Uint8Array(u(e)))},U=function(e,t,n){u(e).set(u(t),n>>>0)},z=function(e){return b(new Uint8Array(e>>>0))},G=function(e,t,n){return b(u(e).subarray(t>>>0,n>>>0))},L=function(e,t){throw new Error(p(e,t))},E=function(){return b(i.k)}}).call(this,n(13)(e))},20:function(e,t,n){}}]);
//# sourceMappingURL=3.9cc2e8d2.chunk.js.map